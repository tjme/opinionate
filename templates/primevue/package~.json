{
  "name": "primevue-toh",
  "version": "0.0.0",
  "license": "MIT",
	"author": "Tim Merrison <tim@merrison.co.uk>",
  "config": {
    "gql_api": {
      "prefix": "http://",
      "hostname": "localhost",
      "port": 5000,
      "path": "/graphql"
    },
    "defaultMeta": {
      "label": "${toProperCase(item.name)}",
      "menu": "${!isEntity(item) ? 'null' : 'Entities'}",
      "primaryKey": "${isEntity(item) ? item.fields[1].name : 'null'}",
      "format": "${isEntity(item) ? 'null' : ['money','money!'].includes(getType(item)) ? 'currency' : ['Boolean','Boolean!'].includes(getType(item)) ? 'boolean' : ['Datetime','Datetime!'].includes(getType(item)) ? 'date' : !isField(item) || ['Int','Int!','BigInt','BigInt!','Float','Float!','BigFloat','BigFloat!'].includes(getType(item)) ? 'number' : 'string'}",
      "validation": "${isEntity(item) ? 'null' : (item.type && item.type.kind=='NON_NULL' ? 'required|' : '')+(getType(item) && ['Datetime','Datetime!'].includes(getType(item)) ? 'datetime' : '')}",
      "align": "${isEntity(item) ? 'null' : !isField(item) || ['money','money!','Datetime','Datetime!','Int','Int!','BigInt','BigInt!','Float','FLoat!','BigFloat','BigFLoat!'].includes(getType(item)) ? 'right' : ['Boolean','Boolean!'].includes(getType(item)) ? 'center' : 'left'}",
      "attributes": null,
      "readonly": "${(isEntity(item) && item.fields[0].name!=='nodeId') || (!isEntity(item) && !isField(item)) || ['nodeId'].includes(item.name)}",
      "linkEntity": "${isEntity(item) ? 'null' : getType(item)==false ? singular(item.name.toLowerCase().split('by')[0]) : !isField(item) || !parent.fields.find(link => getType(link)==null && link.name.toLowerCase().endsWith('by'+item.name)) ? 'null' : parent.fields.find(link => getType(link)==null && link.name.toLowerCase().endsWith('by'+item.name)).name.toLowerCase().split('by')[0]}",
      "linkFields": "${isEntity(item) ? 'null' : getType(item)==false ? item.name.toLowerCase().split('by')[1] : 'null'}",
      "linkFieldsFrom": "${isEntity(item) ? 'null' : getType(item)==false ? parent.fields[1].name : !isField(item) || !parent.fields.find(link => getType(link)==null && link.name.toLowerCase().endsWith('by'+item.name)) ? 'null' : parent.fields.find(link => getType(link)==null && link.name.toLowerCase().endsWith('by'+item.name)).name.toLowerCase().split('by')[1]}",
      "templates": [ "switchboard${item.name=='nodeId' ? '' : '\", \"list'}${item.name=='nodeId' ? '' : '\", \"crud'}" ]
    }
  },
  "codegen": {
    "schema": "models/schema.json",
    "generates": {
      "models/types.d.ts": {
        "plugins": [
          "typescript"
        ]
      }
    }
  },
  "scripts": {
    "preinstall": "npx only-allow pnpm", 
    "gen-json": "postgraphile -c postgres://test:testpass@/toh -s public -X --export-schema-json models/schema.json",
    "gen-gql": "postgraphile -c postgres://test:testpass@/toh -s public -X --export-schema-graphql models/schema.gql",
    "gen-json-a": "apollo client:download-schema --endpoint=$npm_package_config.gql_api_hostname models/schema.json",
    "gen-gql-a": "apollo client:download-schema --endpoint=$npm_package_config.gql_api_hostname models/schema.gql",
    "gen-json-g": "get-graphql-schema $npm_package_config.gql_api_hostname -j > models/schema.json",
    "gen-gql-g": "get-graphql-schema $npm_package_config.gql_api_hostname > models/schema.gql",
    "gen-ts": "graphql-codegen --config node_modules/opinionate/codegen.yml",
    "gen-overlay": "opinionate meta --overlay-out models/overlayOut.json",
    "gen": "opinionate gen --template node_modules/opinionate/templates/primevue -o models/overlayOut.json",
    "backend": "postgraphile -c postgres://test:testpass@/toh --cors --enhance-graphiql -n localhost -p 5000 -q /graphql",
    "dev": "vite",
    "build": "vue-tsc -b && vite build",
    "preview": "vite preview",
    "lint": "eslint --ext .js,.vue --ignore-path .gitignore --fix src"
  },
  "dependencies": {
    "graphql": "^16.0.0",
    "graphql-tag": "^2.11.0",
    "primeflex": "^2.0.0",
    "primeicons": "^4.1.0",
    "primevue": "^3.3.5",
    "vee-validate": "^4.2.4",
    "villus": "^1.0.0",
    "vue": "^3.5.0",
    "vue-router": "^4.5.0"
  },
  "devDependencies": {
    "@graphql-codegen/cli": "^5.0.7",
    "@graphql-codegen/typescript": "^4.1.6",
    "@vitejs/plugin-vue": "^6.0.0",
    "@vue/tsconfig": "^0.7.0",
    "opinionate": "github:tjme/opinionate",
    "typescript": "^5.8.3",
    "vite": "^7.0.4",
    "vue-tsc": "^2.2.12"
  }
}
