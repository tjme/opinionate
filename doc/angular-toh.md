# Example [Angular](https://angular.io) front-end, using [Angular Material](https://material.angular.io)

- Create database, following [toh example database](toh-example.md)
- install angular CLI globally (again, you may need elevated privileges) `pnpm -g add @angular/cli`
- create your Angular project: `ng new ng-toh`
- change to your project directory: `cd ng-toh`
- you are advised to initialize version control to help track source code changes (e.g. `git init`)
- create a data sources directory: `mkdir models`
- if using pnpm, configure: `ng config cli.packageManager pnpm`
- generate JSON and GraphQL schema files: `pnpm postgraphile -c postgres://test:testpass@/toh -s public -X --export-schema-json models/schema.json --export-schema-graphql models/schema.gql`
- run the GraphQL server (in the background): `pnpm postgraphile -c postgres://test:testpass@/toh -s public -o &`
- optionally you can click on the link to GraphiQL generated by the above, and explore the server by entering queries such as: `{allHeroes{nodes{nodeId,id,name}}}`
- add Angular and Material dependencies: `pnpm add rxjs rxjs-compat @angular/material @angular/cdk graphql graphql-tag apollo-client apollo-angular apollo-link apollo-angular-link-http apollo-cache-inmemory`
- install development dependencies: `pnpm add -D @graphql-codegen/cli @graphql-codegen/typescript tjme/opinionate`
- create the TypeScript type definitions for the schema, using graphql-codegen: `pnpm graphql-codegen --config node_modules/opinionate/codegen.yml`
- to automatically (re)generate fully functional List and CRUD components/pages for each GraphQL node/entity, as well as common items (including app.module.ts and app-routing.module.ts): `pnpm opinionate gen --template node_modules/opinionate/templates/angular-material --target ./src/app`
- Note that the above will replace previously generated code without warning, but will not automatically remove any components no longer required
- for more help on options available you can use: `pnpm opinionate gen -h`
- run the Angular server: `ng serve --open`
- the front-end will open automatically in your browser, and you will be able to list, add, update and delete heroes that are then stored (persistently) in the database
- you can use the Angular CLI to further build, develop and test (use `ng help` or refer to the [Angular CLI README](https://github.com/angular/angular-cli/blob/master/README.md))
- you can restore the database, with its initial sample data, by re-running the toh.pgsql script (as above)
